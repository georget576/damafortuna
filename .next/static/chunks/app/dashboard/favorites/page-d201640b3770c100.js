(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{2572:(e,t,r)=>{"use strict";r.d(t,{FavoritesContent:()=>c});var s=r(5155),i=r(2115),n=r(2108),a=r(7806),o=r(7168),d=r(6874),l=r.n(d);function c(){let{data:e,status:t}=(0,n.useSession)(),[r,d]=(0,i.useState)([]),[c,h]=(0,i.useState)(null),[u,m]=(0,i.useState)(!0),x=(0,i.useCallback)(async()=>{try{var t;if(m(!0),h(null),!(null==e||null==(t=e.user)?void 0:t.id))throw Error("User not authenticated");let r=await fetch("/api/favorites/readings?limit=50");if(!r.ok)if(401===r.status)throw Error("Please sign in to view your favorite readings");else if(404===r.status)throw Error("No favorite readings found");else throw Error("Failed to fetch favorite readings: ".concat(r.status));let s=(await r.json()).map(e=>{let t=e.result.cards.map(e=>({id:e.id,name:e.name,position:e.position,isReversed:e.reversed||!1,meaning:e.meaning||"",image:e.image||"",description:"",significance:"",message:"",reversed:"",keywords:[],interpretation:""}));return{id:e.id,type:e.type,question:e.question,cards:t,createdAt:e.createdAt,interpretation:e.result.interpretation,isFavorite:e.isFavorite||!0}});d(s)}catch(e){console.error("Error fetching favorite readings:",e),h(e instanceof Error?e.message:"Unable to connect to the server"),d([])}finally{m(!1)}},[e]);return((0,i.useEffect)(()=>{"authenticated"===t?x():"unauthenticated"===t&&(h("Please sign in to view your favorite readings"),m(!1))},[t,x]),u)?(0,s.jsx)("div",{className:"space-y-6 px-5",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tarot-gold mx-auto"}),(0,s.jsx)("h3",{className:"mt-4 text-lg font-medium font-shadows-into-light text-tarot-gold",children:"Loading your favorite readings..."}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Please wait while we fetch your data."})]})}):c?(0,s.jsx)("div",{className:"space-y-6 px-5",children:(0,s.jsx)("div",{className:"bg-red-50/90 border border-red-300 rounded-lg p-6 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium font-shadows-into-light text-red-800",children:c.includes("Please sign in")?"Authentication Required":"Error Loading Favorites"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,s.jsx)("p",{children:c})}),(0,s.jsx)("div",{className:"mt-4",children:c.includes("Please sign in")?(0,s.jsx)(l(),{href:"/login",children:(0,s.jsx)("button",{className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Sign In"})}):(0,s.jsx)("button",{onClick:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Try Again"})})]})]})})}):(0,s.jsx)("div",{className:"space-y-6 px-5",children:r.length>0?(0,s.jsx)(a.ReadingHistory,{readings:r}):(0,s.jsxs)("div",{className:"text-center py-16 bg-white/10 backdrop-blur-sm rounded-xl border border-purple-200/30",children:[(0,s.jsx)("div",{className:"mx-auto h-16 w-16 text-purple-400",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,s.jsx)("h3",{className:"mt-4 text-xl font-bold font-shadows-into-light text-tarot-gold",children:"No favorite readings yet"}),(0,s.jsx)("p",{className:"mt-2 text-lg font-just-another-hand text-white/80 max-w-md mx-auto",children:"Start favoriting your most insightful readings to see them here."}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(o.$,{asChild:!0,className:"btn-tarot-gold text-lg px-6 py-3",children:(0,s.jsx)(l(),{href:"/dashboard/readings",children:"Browse Your Readings"})})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(o.$,{asChild:!0,variant:"outline",className:"border-tarot-gold text-tarot-gold hover:bg-tarot-gold/10",children:(0,s.jsx)(l(),{href:"/reading",children:"Create New Reading"})})})]})})}},4402:(e,t,r)=>{Promise.resolve().then(r.bind(r,2572)),Promise.resolve().then(r.bind(r,2188)),Promise.resolve().then(r.t.bind(r,6874,23))}},e=>{e.O(0,[460,108,874,63,168,671,396,312,12,441,964,358],()=>e(e.s=4402)),_N_E=e.O()}]);