(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{2085:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var r=s(2596);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.$,i=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,d=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],r=null==l?void 0:l[e];if(null===t)return null;let n=a(t)||a(r);return i[e][n]}),c=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return n(e,d,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...c}[t]):({...l,...c})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},4357:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2108),n=s(7168),i=s(8482),l=s(2115),d=s(4624),c=s(2085),o=s(3999);let u=(0,c.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function h(e){let{className:t,variant:s,asChild:a=!1,...n}=e,i=a?d.DX:"span";return(0,r.jsx)(i,{"data-slot":"badge",className:(0,o.cn)(u({variant:s}),t),...n})}var x=s(5586);let v=[{id:"FREE",name:"Free",price:"$0",features:["3 readings per month","Basic spreads","Community support"],description:"Perfect for casual users"},{id:"PAID",name:"Premium",price:"$9.99 Lifetime",features:["Unlimited readings","All spreads","Priority support","Advanced interpretations"],description:"For dedicated tarot enthusiasts"}];function m(){var e,t,s,d,c;let{data:o,status:u}=(0,a.useSession)(),[m,g]=(0,l.useState)(!1),[p,f]=(0,l.useState)(null),[b,j]=(0,l.useState)(null),[N,y]=(0,l.useState)(null),[w,k]=(0,l.useState)(!0),E=async e=>{if(e.preventDefault(),confirm("Are you sure you want to delete your account? This action cannot be undone.")){g(!0),f(null),j(null);try{let e=await fetch("/api/delete-account",{method:"DELETE",headers:{"Content-Type":"application/json"}}),t=await e.json();t.success?(f(t.message||"Account deleted successfully"),y(null),(0,a.signOut)({callbackUrl:"/"})):j(t.error||"Failed to delete account")}catch(e){console.error("Error deleting account:",e),j("An error occurred while deleting your account. Please try again later.")}finally{g(!1)}}},A=(0,l.useCallback)(async()=>{var e;if(!(null==o||null==(e=o.user)?void 0:e.email))return void k(!1);try{let e=await fetch("/api/user/profile");if(!e.ok)throw Error("Failed to fetch user profile");let t=await e.json();y({id:t.id,email:t.email,name:t.name||void 0,readingCount:t.readingCount,createdAt:(0,x.Yq)(t.createdAt),subscription:t.subscription?{tier:t.subscription.tier,status:t.subscription.status,endDate:t.subscription.endDate?(0,x.Yq)(t.subscription.endDate):null}:void 0})}catch(e){console.error("Error fetching user profile:",e)}finally{k(!1)}},[o]);return((0,l.useEffect)(()=>{"authenticated"===u&&A()},[o,u,A]),"loading"===u||w)?(0,r.jsxs)("div",{className:"flex-1 space-y-8 p-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between space-y-4",children:(0,r.jsx)("h2",{className:"text-4xl font-caveat-brush font-bold tracking-tight tarot-gold",children:"Settings"})}),(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-xl font-caveat-brush text-white",children:"Loading..."})})]}):"unauthenticated"===u?(0,r.jsxs)("div",{className:"flex-1 space-y-8 p-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between space-y-4",children:(0,r.jsx)("h2",{className:"text-4xl font-caveat-brush font-bold tracking-tight tarot-gold",children:"Settings"})}),(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-xl font-caveat-brush text-white mb-4",children:"Please sign in to view your settings"}),(0,r.jsx)(n.$,{className:"btn-tarot-gold font-caveat-brush",children:"Sign In"})]})]}):(0,r.jsxs)("div",{className:"flex-1 space-y-8 p-8",children:[(0,r.jsx)("div",{className:"flex items-center justify-between space-y-4",children:(0,r.jsx)("h2",{className:"text-4xl font-caveat-brush font-bold tracking-tight tarot-gold",children:"Settings"})}),(0,r.jsxs)("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-7",children:[(0,r.jsx)("div",{className:"col-span-4 space-y-8",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{className:"pb-6",children:[(0,r.jsx)(i.ZB,{className:"text-2xl font-caveat-brush tarot-gold",children:"Subscription Tier"}),(0,r.jsx)(i.BT,{className:"text-base font-caveat-brush text-white",children:"Manage your subscription and upgrade your plan"})]}),(0,r.jsxs)(i.Wu,{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg border border-purple-200",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-base text-muted-foreground font-caveat-brush",children:"Current Plan"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)("h3",{className:"text-xl font-caveat-brush font-bold",children:(null==N||null==(e=N.subscription)?void 0:e.tier)||"Free"}),(0,r.jsx)(h,{variant:(null==N||null==(t=N.subscription)?void 0:t.status)==="ACTIVE"?"default":"secondary",className:(null==N||null==(s=N.subscription)?void 0:s.status)==="ACTIVE"?"bg-green-100 text-green-800 font-caveat-brush":"bg-gray-100 text-gray-800 font-caveat-brush",children:(null==N||null==(d=N.subscription)?void 0:d.status)==="ACTIVE"?"Active":"Inactive"})]}),(null==N||null==(c=N.subscription)?void 0:c.endDate)&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Renews on ",N.subscription.endDate]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold font-caveat-brush tarot-gold",children:"Available Plans"}),v.map(e=>{var t,s,a,i,l,d;return(0,r.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat((null==N||null==(t=N.subscription)?void 0:t.tier)===e.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"text-lg font-semibold font-caveat-brush tarot-gold",children:e.name}),(0,r.jsx)("p",{className:"text-2xl font-bold tarot-gold font-caveat-brush",children:e.price}),(0,r.jsx)("p",{className:"text-sm text-white font-shadows-into-light",children:e.description})]}),(0,r.jsx)("div",{className:"text-right",children:(null==N||null==(s=N.subscription)?void 0:s.tier)===e.id?(0,r.jsx)(h,{className:"bg-green-100 text-green-800",children:"Current Plan"}):(0,r.jsx)(n.$,{variant:"outline",className:"tarot-gold border-purple-300 hover:bg-purple-50 font-caveat-brush",disabled:(null==N||null==(a=N.subscription)?void 0:a.status)==="ACTIVE"&&(null==N||null==(i=N.subscription)?void 0:i.tier)!=="FREE",children:(null==N||null==(l=N.subscription)?void 0:l.status)==="ACTIVE"&&(null==N||null==(d=N.subscription)?void 0:d.tier)!=="FREE"?"Change Plan":"Select Plan"})})]}),(0,r.jsx)("div",{className:"mt-3 space-y-1",children:e.features.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm font-shadows-into-light text-purple-300",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,r.jsx)("span",{children:e})]},t))})]},e.id)})]}),(0,r.jsx)("div",{className:"flex space-x-4 pt-4",children:(0,r.jsx)(n.$,{className:"btn-tarot-gold font-caveat-brush",children:"Upgrade Plan"})})]})]})}),(0,r.jsx)("div",{className:"col-span-3 space-y-8",children:(0,r.jsxs)(i.Zp,{className:"border-red-200",children:[(0,r.jsxs)(i.aR,{className:"pb-6",children:[(0,r.jsx)(i.ZB,{className:"text-2xl font-caveat-brush text-red-500",children:"Danger Zone"}),(0,r.jsx)(i.BT,{className:"text-base font-just-another-hand text-white",children:"Once you delete your account, there is no going back"})]}),(0,r.jsxs)(i.Wu,{className:"space-y-4",children:[b&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800 font-caveat-brush",children:"Error"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,r.jsx)("p",{className:"font-shadows-into-light",children:b})})]})]})}),p&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800 font-caveat-brush",children:"Success"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,r.jsx)("p",{className:"font-shadows-into-light",children:p})})]})]})}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800 font-caveat-brush",children:"This action cannot be undone"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,r.jsx)("p",{className:"font-shadows-into-light",children:"This will permanently delete your account and remove all your data from our servers, including your readings and favorites."})})]})]})}),(0,r.jsx)("form",{onSubmit:E,children:(0,r.jsx)(n.$,{type:"submit",variant:"destructive",className:"w-full font-caveat-brush",disabled:m,children:m?"Deleting...":"Delete Account"})})]})]})})]})]})}},5139:(e,t,s)=>{Promise.resolve().then(s.bind(s,4357))},5586:(e,t,s)=>{"use strict";function r(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}function a(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}s.d(t,{Yq:()=>r,r6:()=>a})},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155);s(2115);var a=s(4624),n=s(2085),i=s(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-base font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:s,size:n,asChild:d=!1,...c}=e,o=d?a.DX:"button",u=Object.fromEntries(Object.entries(c).filter(e=>{let[t]=e;return"fdprocessedid"!==t}));return(0,r.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...u})}},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i});var r=s(5155);s(2115);var a=s(3999);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold text-lg",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-base",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}}},e=>{e.O(0,[460,108,441,964,358],()=>e(e.s=5139)),_N_E=e.O()}]);