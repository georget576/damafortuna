"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{376:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(5155),s=a(2115),i=a(1976),n=a(7168),l=a(9052);function o(e){let{readingId:t,isFavorite:a,size:o="md",onToggle:c}=e,[d,h]=(0,s.useState)(a),[u,m]=(0,s.useState)(!1),x=async e=>{e.preventDefault(),e.stopPropagation(),m(!0);try{let e=await fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({readingId:t})});if(!e.ok)throw Error("Failed to toggle favorite");let a=(await e.json()).isFavorite;h(a),null==c||c(a),l.oR.success(a?"Added to favorites!":"Removed from favorites")}catch(e){console.error("Error toggling favorite:",e),l.oR.error("Failed to update favorite status")}finally{m(!1)}},f={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:x,disabled:u,className:"p-1 hover:bg-transparent ".concat(d?"text-red-500 hover:text-red-600 font-caveat-brush":"text-gray-400 hover:text-red-500 font-caveat-brush"),"aria-label":d?"Remove from favorites":"Add to favorites",children:[d?(0,r.jsx)(i.A,{className:f[o],fill:"currentColor"}):(0,r.jsx)(i.A,{className:f[o]}),(0,r.jsx)("span",{className:"sr-only",children:d?"Remove from favorites":"Add to favorites"})]})}},1976:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},2188:(e,t,a)=>{a.d(t,{DashboardLayout:()=>i});var r=a(5155),s=a(7365);function i(e){let{children:t}=e;return(0,r.jsx)(s.A,{required:!0,children:t})}},5586:(e,t,a)=>{function r(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}function s(e){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}a.d(t,{Yq:()=>r,r6:()=>s})},5695:(e,t,a)=>{var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},7365:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5155),s=a(2115),i=a(2108),n=a(5695);function l(e){let{children:t,required:a=!0}=e,{data:l,status:o}=(0,i.useSession)(),c=(0,n.useRouter)(),[d,h]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{h(!0)},[]),(0,s.useEffect)(()=>{d&&"loading"===o||a&&!l&&c.push("/login")},[l,o,a,c,d]),"loading"!==o&&d)?a&&!l?null:(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-purple-800",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-t-2 border-tarot-gold"})})}},7806:(e,t,a)=>{a.d(t,{ReadingHistory:()=>x});var r=a(5155),s=a(2115),i=a(2005),n=a(6874),l=a.n(n),o=a(8482),c=a(7168),d=a(4496),h=a(7136),u=a(5586),m=a(376);function x(e){let{readings:t}=e,[a,n]=(0,s.useState)(1),[x,f]=(0,s.useState)("all"),[p,g]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(t);(0,s.useEffect)(()=>{j(!0)},[]);let y=N.filter(e=>("all"===x||e.type===x)&&(!p||!e.createdAt||new Date(e.createdAt).toISOString().split("T")[0]===p)&&!0),b=Math.ceil(y.length/5),C=(a-1)*5,k=y.slice(C,C+5),A=()=>{n(1)};return v?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)(o.Zp,{className:"tarot-texture",children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,r.jsx)(o.ZB,{className:"text-2xl font-caveat-brush font-bold tarot-gold",children:"History"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 font-caveat-brush tarot-gold",children:[(0,r.jsxs)("select",{value:x,onChange:e=>{f(e.target.value),A()},className:"p-2 border rounded-md bg-background",children:[(0,r.jsx)("option",{value:"all",children:"All Spreads"}),(0,r.jsx)("option",{value:h.aK.ONE_CARD,children:"One Card"}),(0,r.jsx)("option",{value:h.aK.THREE_CARD,children:"Three Card"}),(0,r.jsx)("option",{value:h.aK.CELTIC_CROSS,children:"Celtic Cross"})]}),(0,r.jsx)("input",{type:"date",value:p,onChange:e=>{g(e.target.value),A()},className:"p-2 border rounded-md bg-background [color-scheme:light] [&::-webkit-calendar-picker-indicator]:text-tarot-gold [&::-webkit-calendar-picker-indicator]:cursor-pointer [&::-webkit-calendar-picker-indicator]:hover:text-opacity-80",style:{color:"oklch(75% 0.15 80)"}}),("all"!==x||p)&&(0,r.jsx)(c.$,{variant:"outline",onClick:()=>{f("all"),g(""),A()},children:"Clear Filters"})]})]})}),(0,r.jsx)(o.Wu,{className:"space-y-6",children:0===k.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"font-shadows-into-light text-muted-foreground",children:0===t.length?"You haven't created any readings yet.":"No readings match your filters."})}):(0,r.jsxs)("div",{className:"space-y-6",children:[k.map((e,t)=>(0,r.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-4 bg-white/10 rounded-lg border border-purple-200 hover:bg-white/20 transition-colors",children:(0,r.jsx)(l(),{href:"/reading/".concat(e.id),className:"block",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex gap-2 overflow-x-auto",children:[e.cards.slice(0,3).map(e=>(0,r.jsx)("div",{className:"w-16 h-28 flex-shrink-0",children:(0,r.jsx)(d.r,{name:e.name,image:e.image||"",upright:!e.isReversed,className:"w-full h-full"})},e.id)),e.cards.length>3&&(0,r.jsx)("div",{className:"w-16 h-28 flex-shrink-0 flex items-center justify-center bg-black/20 rounded",children:(0,r.jsxs)("span",{className:"text-xs text-center",children:["+",e.cards.length-3," more"]})})]})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-start gap-2",children:[(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsxs)("h3",{className:"font-caveat-brush font-bold text-lg tarot-gold hover:text-purple-200 transition-colors",children:[(e=>{switch(e){case h.aK.ONE_CARD:return"One Card";case h.aK.THREE_CARD:return"Three Card";case h.aK.CELTIC_CROSS:return"Celtic Cross";default:return e}})(e.type)," Reading"]}),(0,r.jsx)("p",{className:"text-sm font-just-another-hand text-white",children:e.createdAt?(0,u.r6)(e.createdAt):"Unknown date"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)(m.Z,{readingId:e.id||"",isFavorite:e.isFavorite||!1,onToggle:t=>{var a;a=e.id,a&&w(e=>e.map(e=>e.id===a?{...e,isFavorite:t}:e))}}),(0,r.jsx)("span",{className:"text-xs text-white font-caveat-brush",children:e.isFavorite?"Favorited":"Not favorited"})]})]}),e.question&&(0,r.jsxs)("p",{className:"font-just-another-hand italic max-w-md line-clamp-2 tarot-gold",children:["“",e.question,"”"]}),e.interpretation&&(0,r.jsx)("p",{className:"mt-2 text-sm font-shadows-into-light line-clamp-2 text-white",children:e.interpretation})]})]})})},e.id||t)),b>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,r.jsx)(c.$,{variant:"outline",onClick:()=>n(e=>Math.max(e-1,1)),disabled:1===a,className:"font-caveat-brush tarot-gold",children:"Previous"}),(0,r.jsxs)("span",{className:"px-4 py-2 font-just-another-hand text-lg text-white",children:["Page ",(0,r.jsx)("span",{className:"font-just-another-hand",children:a})," of ",(0,r.jsx)("span",{className:"font-just-another-hand",children:b})]}),(0,r.jsx)(c.$,{variant:"outline",onClick:()=>n(e=>Math.min(e+1,b)),disabled:a===b,className:"font-caveat-brush tarot-gold",children:"Next"})]})]})})]})}):(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(o.Zp,{className:"tarot-texture",children:(0,r.jsx)(o.Wu,{className:"space-y-6",children:(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"font-just-another-hand text-muted-foreground",children:"Loading readings..."})})})})})}},9946:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...u}=e;return(0,r.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:a,strokeWidth:o?24*Number(l)/Number(s):l,className:i("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:o,...c}=a;return(0,r.createElement)(l,{ref:n,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return a.displayName=s(e),a}}}]);